<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | SkillTrade</title>
    
    <!-- CSS Principal -->
    <link rel="stylesheet" href="/css/main.css">
    
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Header -->
    <%- include('partials/header') %>
    
    <!-- Main Content -->
    <main class="flex-1">
        <%- body %>
    </main>
    
    <!-- Footer -->
    <%- include('partials/footer') %>
    
    <!-- Modal de Login -->
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" style="background: transparent; border: none;">
                <div class="position-relative">
                    <!-- Background with gradient -->
                    <div class="position-absolute w-100 h-100 bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 rounded-4">
                        <div class="position-absolute w-100 h-100 bg-black bg-opacity-30 rounded-4"></div>
                        <!-- Animated background elements -->
                        <div class="position-absolute top-0 start-0 w-25 h-25 bg-primary bg-opacity-20 rounded-circle" style="filter: blur(60px); animation: pulse 3s infinite;"></div>
                        <div class="position-absolute bottom-0 end-0 w-50 h-50 bg-info bg-opacity-10 rounded-circle" style="filter: blur(80px); animation: pulse 4s infinite 1s;"></div>
                    </div>
                    
                    <!-- Content -->
                    <div class="position-relative p-5">
                        <!-- Close button -->
                        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="z-index: 10;"></button>
                        
                        <!-- Header -->
                        <div class="text-center mb-4">
                            <div class="d-inline-flex align-items-center justify-content-center w-25 h-25 bg-gradient-to-r from-blue-500 to-purple-600 rounded-circle mb-3" style="width: 80px; height: 80px;">
                                <i class="bi bi-box-arrow-in-right text-white" style="font-size: 2rem;"></i>
                            </div>
                            <h2 class="text-white fw-bold mb-2" style="font-size: 2.5rem;">¡Bienvenido!</h2>
                            <p class="text-white-50 mb-0">Inicia sesión para continuar tu viaje de aprendizaje</p>
                        </div>
                        
                        <form id="loginForm">
                            <!-- Email Field -->
                            <div class="mb-4">
                                <label for="loginEmail" class="form-label text-white fw-semibold mb-2">Correo Electrónico</label>
                                <div class="position-relative">
                                    <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                        <i class="bi bi-envelope"></i>
                                    </div>
                                    <input type="email" class="form-control ps-5 py-3 text-white" 
                                           style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                           id="loginEmail" name="email" placeholder="tu@email.com" required>
                                </div>
                            </div>
                            
                            <!-- Password Field -->
                            <div class="mb-4">
                                <label for="loginPassword" class="form-label text-white fw-semibold mb-2">Contraseña</label>
                                <div class="position-relative">
                                    <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                        <i class="bi bi-lock"></i>
                                    </div>
                                    <input type="password" class="form-control ps-5 py-3 text-white" 
                                           style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                           id="loginPassword" name="password" placeholder="Tu contraseña" required>
                                </div>
                            </div>
                            
                            <!-- Remember Me -->
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="rememberMe">
                                    <label class="form-check-label text-white-50" for="rememberMe">
                                        Recordarme
                                    </label>
                                </div>
                                <a href="#" class="text-decoration-none" style="color: #60a5fa;">¿Olvidaste tu contraseña?</a>
                            </div>
                            
                            <!-- Submit Button -->
                            <button type="submit" class="btn w-100 py-3 mb-4 fw-bold text-white border-0" 
                                    style="background: linear-gradient(135deg, #3b82f6, #8b5cf6); border-radius: 12px; font-size: 1.1rem; transition: all 0.3s ease;"
                                    onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 10px 25px rgba(59,130,246,0.3)'"
                                    onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">
                                <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesión
                            </button>
                            
                            <!-- Divider -->
                            <div class="text-center mb-4">
                                <div class="d-flex align-items-center">
                                    <hr class="flex-grow-1 border-white-50">
                                    <span class="px-3 text-white-50">o</span>
                                    <hr class="flex-grow-1 border-white-50">
                                </div>
                            </div>
                            
                            <!-- Switch to Register -->
                            <div class="text-center">
                                <p class="text-white-50 mb-2">¿No tienes cuenta aún?</p>
                                <button type="button" class="btn btn-outline-light px-4 py-2 fw-semibold" 
                                        style="border-radius: 12px; border-width: 2px;"
                                        data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal">
                                    Crear Cuenta Gratis
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal de Registro -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" style="background: transparent; border: none;">
                <div class="position-relative">
                    <!-- Background with gradient -->
                    <div class="position-absolute w-100 h-100 bg-gradient-to-br from-purple-900 via-pink-900 to-indigo-900 rounded-4">
                        <div class="position-absolute w-100 h-100 bg-black bg-opacity-30 rounded-4"></div>
                        <!-- Animated background elements -->
                        <div class="position-absolute top-0 end-0 w-25 h-25 bg-success bg-opacity-20 rounded-circle" style="filter: blur(60px); animation: pulse 3s infinite;"></div>
                        <div class="position-absolute bottom-0 start-0 w-50 h-50 bg-warning bg-opacity-10 rounded-circle" style="filter: blur(80px); animation: pulse 4s infinite 1s;"></div>
                    </div>
                    
                    <!-- Content -->
                    <div class="position-relative p-5">
                        <!-- Close button -->
                        <button type="button" class="btn-close btn-close-white position-absolute top-0 end-0 m-3" data-bs-dismiss="modal" aria-label="Close" style="z-index: 10;"></button>
                        
                        <!-- Header -->
                        <div class="text-center mb-4">
                            <div class="d-inline-flex align-items-center justify-content-center w-25 h-25 bg-gradient-to-r from-green-500 to-blue-600 rounded-circle mb-3" style="width: 80px; height: 80px;">
                                <i class="bi bi-person-plus text-white" style="font-size: 2rem;"></i>
                            </div>
                            <h2 class="text-white fw-bold mb-2" style="font-size: 2.5rem;">¡Únete a SkillTrade!</h2>
                            <p class="text-white-50 mb-0">Crea tu cuenta y comienza a intercambiar conocimientos</p>
                        </div>
                        
                        <form id="registerForm">
                            <!-- Nombre Field -->
                            <div class="mb-3">
                                <label for="registerNombre" class="form-label text-white fw-semibold mb-2">Nombre Completo</label>
                                <div class="position-relative">
                                    <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                        <i class="bi bi-person"></i>
                                    </div>
                                    <input type="text" class="form-control ps-5 py-3 text-white" 
                                           style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                           id="registerNombre" name="nombre" placeholder="Tu nombre completo" required>
                                </div>
                            </div>
                            
                            <!-- Email Field -->
                            <div class="mb-3">
                                <label for="registerEmail" class="form-label text-white fw-semibold mb-2">Correo Electrónico</label>
                                <div class="position-relative">
                                    <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                        <i class="bi bi-envelope"></i>
                                    </div>
                                    <input type="email" class="form-control ps-5 py-3 text-white" 
                                           style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                           id="registerEmail" name="email" placeholder="tu@email.com" required>
                                </div>
                            </div>
                            
                            <!-- Password Fields Row -->
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="registerPassword" class="form-label text-white fw-semibold mb-2">Contraseña</label>
                                        <div class="position-relative">
                                            <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                                <i class="bi bi-lock"></i>
                                            </div>
                                            <input type="password" class="form-control ps-5 py-3 text-white" 
                                                   style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                                   id="registerPassword" name="password" placeholder="Mínimo 8 caracteres" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="confirmPassword" class="form-label text-white fw-semibold mb-2">Confirmar</label>
                                        <div class="position-relative">
                                            <div class="position-absolute top-50 start-0 translate-middle-y ms-3 text-white-50">
                                                <i class="bi bi-shield-lock"></i>
                                            </div>
                                            <input type="password" class="form-control ps-5 py-3 text-white" 
                                                   style="background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;"
                                                   id="confirmPassword" name="confirmPassword" placeholder="Confirma tu contraseña" required>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Terms Checkbox -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="acceptTerms" required>
                                    <label class="form-check-label text-white-50" for="acceptTerms">
                                        Acepto los <a href="#" class="text-decoration-none" style="color: #60a5fa;">términos y condiciones</a> y la <a href="#" class="text-decoration-none" style="color: #60a5fa;">política de privacidad</a>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- Submit Button -->
                            <button type="submit" class="btn w-100 py-3 mb-4 fw-bold text-white border-0" 
                                    style="background: linear-gradient(135deg, #10b981, #3b82f6); border-radius: 12px; font-size: 1.1rem; transition: all 0.3s ease;"
                                    onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 10px 25px rgba(16,185,129,0.3)'"
                                    onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">
                                <i class="bi bi-person-plus me-2"></i>Crear Cuenta Gratis
                            </button>
                            
                            <!-- Benefits -->
                            <div class="mb-4">
                                <div class="row text-center">
                                    <div class="col-4">
                                        <i class="bi bi-shield-check text-success mb-1" style="font-size: 1.5rem;"></i>
                                        <p class="text-white-50 small mb-0">100% Seguro</p>
                                    </div>
                                    <div class="col-4">
                                        <i class="bi bi-gift text-warning mb-1" style="font-size: 1.5rem;"></i>
                                        <p class="text-white-50 small mb-0">Siempre Gratis</p>
                                    </div>
                                    <div class="col-4">
                                        <i class="bi bi-lightning-charge text-info mb-1" style="font-size: 1.5rem;"></i>
                                        <p class="text-white-50 small mb-0">Acceso Instantáneo</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Divider -->
                            <div class="text-center mb-4">
                                <div class="d-flex align-items-center">
                                    <hr class="flex-grow-1 border-white-50">
                                    <span class="px-3 text-white-50">o</span>
                                    <hr class="flex-grow-1 border-white-50">
                                </div>
                            </div>
                            
                            <!-- Switch to Login -->
                            <div class="text-center">
                                <p class="text-white-50 mb-2">¿Ya tienes una cuenta?</p>
                                <button type="button" class="btn btn-outline-light px-4 py-2 fw-semibold" 
                                        style="border-radius: 12px; border-width: 2px;"
                                        data-bs-toggle="modal" data-bs-target="#loginModal" data-bs-dismiss="modal">
                                    Iniciar Sesión
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript Principal -->
    <script src="/js/main.js"></script>
    
    <!-- JavaScript de Autenticación -->
    <script src="/js/auth.js"></script>
    
    <!-- Scripts específicos por página -->
    <% if (typeof scripts !== 'undefined') { %>
        <% scripts.forEach(script => { %>
            <script src="<%= script %>"></script>
        <% }) %>
    <% } %>
</body>
</html>
