<div class="container-fluid py-5">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3">
            <div class="card">
                <div class="card-header">
                    <h5>Panel de Administración</h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="#usuarios" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="bi bi-people"></i> Usuarios (<%= usuarios.length %>)
                        </a>
                        <a href="#cursos" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="bi bi-book"></i> Cursos (<%= cursos.length %>)
                        </a>
                        <a href="#exchanges" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="bi bi-arrow-left-right"></i> Intercambios (<%= exchanges.length %>)
                        </a>
                        <a href="#estadisticas" class="list-group-item list-group-item-action" data-bs-toggle="tab">
                            <i class="bi bi-graph-up"></i> Estadísticas
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Contenido Principal -->
        <div class="col-md-9">
            <div class="tab-content">
                <!-- Tab Usuarios -->
                <div class="tab-pane fade show active" id="usuarios">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5>Gestión de Usuarios</h5>
                            <button class="btn btn-primary btn-sm">
                                <i class="bi bi-plus"></i> Agregar Usuario
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nombre</th>
                                            <th>Email</th>
                                            <th>Rol</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% usuarios.forEach(usuario => { %>
                                            <tr>
                                                <td><%= usuario._id.substring(0, 8) %>...</td>
                                                <td><%= usuario.nombre %></td>
                                                <td><%= usuario.email %></td>
                                                <td>
                                                    <span class="badge bg-<%= usuario.rol === 'admin' ? 'danger' : 'primary' %>">
                                                        <%= usuario.rol %>
                                                    </span>
                                                </td>
                                                <td>
                                                    <span class="badge bg-<%= usuario.activo ? 'success' : 'secondary' %>">
                                                        <%= usuario.activo ? 'Activo' : 'Inactivo' %>
                                                    </span>
                                                </td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Cursos -->
                <div class="tab-pane fade" id="cursos">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5>Gestión de Cursos</h5>
                            <button class="btn btn-primary btn-sm">
                                <i class="bi bi-plus"></i> Agregar Curso
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Título</th>
                                            <th>Categorías</th>
                                            <th>Precio</th>
                                            <th>Estado</th>
                                            <th>Owner</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% cursos.forEach(curso => { %>
                                            <tr>
                                                <td><%= curso.titulo %></td>
                                                <td>
                                                    <% curso.categoria.forEach(cat => { %>
                                                        <span class="badge bg-primary me-1"><%= cat %></span>
                                                    <% }); %>
                                                </td>
                                                <td>$<%= curso.costo %></td>
                                                <td>
                                                    <span class="badge bg-<%= curso.estadoCurso === 'activo' ? 'success' : 'warning' %>">
                                                        <%= curso.estadoCurso %>
                                                    </span>
                                                </td>
                                                <td><%= curso.owner ? curso.owner.usuario : 'N/A' %></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Intercambios -->
                <div class="tab-pane fade" id="exchanges">
                    <div class="card">
                        <div class="card-header">
                            <h5>Gestión de Intercambios</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Emisor</th>
                                            <th>Receptor</th>
                                            <th>Curso</th>
                                            <th>Tipo</th>
                                            <th>Estado</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% exchanges.forEach(exchange => { %>
                                            <tr>
                                                <td><%= exchange.emisor ? exchange.emisor.nombre : 'N/A' %></td>
                                                <td><%= exchange.receptor ? exchange.receptor.nombre : 'N/A' %></td>
                                                <td><%= exchange.curso ? exchange.curso.titulo : 'N/A' %></td>
                                                <td>
                                                    <span class="badge bg-info"><%= exchange.tipo %></span>
                                                </td>
                                                <td>
                                                    <span class="badge bg-<%= exchange.estado === 'aceptado' ? 'success' : 'warning' %>">
                                                        <%= exchange.estado %>
                                                    </span>
                                                </td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-success">
                                                        <i class="bi bi-check"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-x"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab Estadísticas -->
                <div class="tab-pane fade" id="estadisticas">
                    <div class="row">
                        <div class="col-md-3 mb-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-primary"><%= usuarios.length %></h3>
                                    <p class="card-text">Usuarios Registrados</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-success"><%= cursos.length %></h3>
                                    <p class="card-text">Cursos Disponibles</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-info"><%= exchanges.length %></h3>
                                    <p class="card-text">Intercambios Activos</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 mb-4">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h3 class="text-warning">$<%= cursos.reduce((sum, curso) => sum + curso.costo, 0) %></h3>
                                    <p class="card-text">Valor Total</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 