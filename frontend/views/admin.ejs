<header class="bg-gradient text-white p-3 d-flex justify-content-between align-items-center shadow-sm">
    <h2 class="fw-bold m-0">SkillTrade - Panel de Administrador</h2>
    <div class="d-flex align-items-center">
        <i class="bi bi-person-circle fs-4 me-2"></i>
        <span class="fw-semibold">Admin</span>
    </div>
</header>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar">
            <div class="position-sticky">
                <ul class="nav flex-column pt-4">
                    <li class="nav-item">
                        <a class="nav-link active" href="#dashboard"><i class="bi bi-house-door"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#cursos"><i class="bi bi-book"></i> Cursos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#usuarios"><i class="bi bi-person-circle"></i> Usuarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#ventas"><i class="bi bi-credit-card"></i> Ventas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#configuracion"><i class="bi bi-gear"></i> Configuración</a>
                    </li>
                    <li class="nav-item mt-5">
                        <a class="nav-link text-danger" href="#" id="logoutLink"><i class="bi bi-box-arrow-right"></i> Cerrar sesión</a>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">
            <!-- Dashboard -->
            <section id="dashboard" class="section">
                <h3 class="mb-4 fw-bold">Dashboard</h3>
                <div class="row g-4">
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Ganancias Mensuales</div>
                            <div class="card-body">
                                <h4>$40,000</h4>
                                <p class="mb-0 text-muted">Desde el inicio del mes</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Ganancias Anuales</div>
                            <div class="card-body">
                                <h4>$295,000</h4>
                                <p class="mb-0 text-muted">Este año hasta la fecha</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">Usuarios Activos</div>
                            <div class="card-body">
                                <h4><%= usuarios ? usuarios.length : 1250 %></h4>
                                <p class="mb-0 text-muted">Actualmente registrados</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Gráficas -->
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Ganancias por Mes</div>
                            <div class="card-body">
                                <canvas id="earningsChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Intercambios por Mes</div>
                            <div class="card-body">
                                <canvas id="revenueSourcesChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cursos -->
            <section id="cursos" class="section" style="display: none;">
                <h3 class="mb-4 fw-bold">Gestión de Cursos</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Título</th>
                                <th>Categoría</th>
                                <th>Precio</th>
                                <th>Rating</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (cursos && cursos.length > 0) { %>
                                <% cursos.forEach((curso, index) => { %>
                                    <tr>
                                        <td><%= index + 1 %></td>
                                        <td><%= curso.titulo %></td>
                                        <td><%= curso.categoria || 'General' %></td>
                                        <td>COP <%= (curso.precio || 0).toLocaleString() %></td>
                                        <td><%= (curso.rating || 0).toFixed(1) %></td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">Editar</button>
                                            <button class="btn btn-sm btn-danger">Eliminar</button>
                                        </td>
                                    </tr>
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="6" class="text-center">No hay cursos disponibles</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Usuarios -->
            <section id="usuarios" class="section" style="display: none;">
                <h3 class="mb-4 fw-bold">Gestión de Usuarios</h3>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Rol</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% if (usuarios && usuarios.length > 0) { %>
                                <% usuarios.forEach((usuario, index) => { %>
                                    <tr>
                                        <td><%= index + 1 %></td>
                                        <td><%= usuario.nombre || usuario.username || 'Usuario' %></td>
                                        <td><%= usuario.email %></td>
                                        <td><%= usuario.rol || 'Estudiante' %></td>
                                        <td><span class="badge bg-success">Activo</span></td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">Editar</button>
                                            <button class="btn btn-sm btn-danger">Eliminar</button>
                                        </td>
                                    </tr>
                                <% }); %>
                            <% } else { %>
                                <tr>
                                    <td colspan="6" class="text-center">No hay usuarios disponibles</td>
                                </tr>
                            <% } %>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Ventas -->
            <section id="ventas" class="section" style="display: none;">
                <h3 class="mb-4 fw-bold">Gestión de Ventas</h3>
                <div class="row g-4">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Ventas del Mes</div>
                            <div class="card-body">
                                <h4>COP 15,000,000</h4>
                                <p class="mb-0 text-muted">Total de ventas</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Cursos Vendidos</div>
                            <div class="card-body">
                                <h4>150</h4>
                                <p class="mb-0 text-muted">Este mes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Configuración -->
            <section id="configuracion" class="section" style="display: none;">
                <h3 class="mb-4 fw-bold">Configuración del Sistema</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Configuración General</div>
                            <div class="card-body">
                                <form>
                                    <div class="mb-3">
                                        <label class="form-label">Nombre de la Plataforma</label>
                                        <input type="text" class="form-control" value="SkillTrade">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Email de Contacto</label>
                                        <input type="email" class="form-control" value="contact@skilltrade.com">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Moneda</label>
                                        <select class="form-select">
                                            <option>COP (Peso Colombiano)</option>
                                            <option>USD (Dólar Estadounidense)</option>
                                            <option>EUR (Euro)</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">Configuración de Seguridad</div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label">Autenticación de Dos Factores</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" checked>
                                        <label class="form-check-label">Habilitar 2FA</label>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Sesión Timeout</label>
                                    <select class="form-select">
                                        <option>30 minutos</option>
                                        <option>1 hora</option>
                                        <option>2 horas</option>
                                    </select>
                                </div>
                                <button class="btn btn-warning">Cambiar Contraseña</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<script>
// Script para manejar la navegación del panel de administración
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('#sidebar .nav-link');
    const sections = document.querySelectorAll('.section');
    
    // Mostrar dashboard por defecto
    showSection('dashboard');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Remover clase active de todos los links
            navLinks.forEach(nav => nav.classList.remove('active'));
            
            // Agregar clase active al link clickeado
            this.classList.add('active');
            
            // Mostrar la sección correspondiente
            const target = this.getAttribute('href').substring(1);
            showSection(target);
        });
    });
    
    function showSection(sectionId) {
        // Ocultar todas las secciones
        sections.forEach(section => {
            section.style.display = 'none';
        });
        
        // Mostrar la sección objetivo
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
            targetSection.style.display = 'block';
        }
    }
});
</script> 