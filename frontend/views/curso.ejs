<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24">
    <div class="w-full">
        <!-- Breadcrumb Navigation -->
        <nav class="mb-8" aria-label="breadcrumb">
            <ol class="flex items-center space-x-2 text-sm">
                <li><a href="/cursos" class="text-primary-600 hover:text-primary-700 transition-colors">Cursos</a></li>
                <li class="text-gray-400">/</li>
                <li><a href="/cursos?categoria=<%= curso.categoria || 'todos' %>" class="text-primary-600 hover:text-primary-700 transition-colors"><%= curso.categoria || 'General' %></a></li>
                <li class="text-gray-400">/</li>
                <li class="text-gray-900 dark:text-white font-medium"><%= curso.titulo %></li>
            </ol>
        </nav>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2">
                <!-- Course Title and Description -->
                <h1 class="text-4xl lg:text-5xl font-bold mb-4 text-gray-900 dark:text-white">
                    <%= curso.titulo || 'PROGRAMACI√ìN DE CERO A SENIOR EN JAVA' %>
                    <span class="text-gray-600 dark:text-gray-400 text-xl lg:text-2xl font-normal">. <%= curso.subtitulo || 'Domina Java y buenas pr√°cticas' %></span>
                </h1>
                
                <p class="text-lg text-gray-700 dark:text-gray-300 mb-6 leading-relaxed">
                    <%= curso.descripcion || 'Desde sintaxis b√°sica hasta arquitecturas empresariales con Spring Boot, construye aplicaciones robustas siguiendo principios de Clean Code y SOLID.' %>
                </p>

                <!-- Course Stats -->
                <div class="flex flex-wrap items-center gap-4 mb-8">
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">
                        Lo m√°s vendido
                    </span>
                    <div class="flex items-center gap-2">
                        <span class="text-2xl font-bold text-primary-600"><%= (curso.rating || 4.8).toFixed(1) %></span>
                        <div class="flex items-center text-yellow-500">
                            <% for(let i = 0; i < 5; i++) { %>
                                <% if (i < Math.floor(curso.rating || 4.8)) { %>
                                    <i class="bi bi-star-fill"></i>
                                <% } else if (i === Math.floor(curso.rating || 4.8) && (curso.rating || 4.8) % 1 > 0) { %>
                                    <i class="bi bi-star-half"></i>
                                <% } else { %>
                                    <i class="bi bi-star"></i>
                                <% } %>
                            <% } %>
                        </div>
                        <span class="text-gray-600 dark:text-gray-400">(<%= (curso.numValoraciones || 4512).toLocaleString() %> valoraciones)</span>
                    </div>
                    <span class="text-gray-600 dark:text-gray-400"><%= (curso.numEstudiantes || 12470).toLocaleString() %> estudiantes</span>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4 mb-12">
                    <button class="inline-flex items-center justify-center px-6 py-3 border border-primary-600 text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 font-medium rounded-lg transition-colors" 
                            onclick="addToCart('<%= curso._id %>', '<%= curso.titulo %>', <%= curso.precio || 200000 %>)">
                        <i class="bi bi-cart mr-2"></i>
                        A√±adir al carrito
                    </button>
                    <a href="/comprar/<%= curso._id %>" class="inline-flex items-center justify-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors">
                        Comprar ahora
                    </a>
                </div>

                <!-- What You'll Learn Section -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">¬øQu√© aprender√°s?</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-6 border-b border-gray-200 dark:border-gray-700">
                        <div>
                            <ul class="space-y-3">
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje1 || 'Sintaxis y estructuras de control en Java' %></span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje2 || 'Programaci√≥n orientada a objetos y patrones de dise√±o' %></span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje3 || 'Colecciones, gen√©ricos y Streams en Java 8+' %></span>
                                </li>
                            </ul>
                        </div>
                        <div>
                            <ul class="space-y-3">
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje4 || 'Tests unitarios con JUnit y Mockito' %></span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje5 || 'Desarrollo de APIs REST con Spring Boot' %></span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                                    <span class="text-gray-700 dark:text-gray-300"><%= curso.aprendizaje6 || 'Principios SOLID y Clean Code aplicados a Java' %></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Course Includes Section -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">Incluye</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pb-6 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üé•</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.horasVideo || '12' %> horas de v√≠deo bajo demanda</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üìÑ</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.numArticulos || '5' %> art√≠culos detallados</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üì•</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.numRecursos || '30' %> recursos descargables</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üì±</span>
                            <span class="text-gray-700 dark:text-gray-300">Acceso en m√≥viles y TV</span>
                        </div>
                        <div class="flex items-center">
                            <span class="text-2xl mr-3">üèÜ</span>
                            <span class="text-gray-700 dark:text-gray-300">Certificado de finalizaci√≥n</span>
                        </div>
                    </div>
                </section>

                <!-- Course Content Section -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">Contenido del curso</h2>
                    <p class="text-gray-600 dark:text-gray-400 mb-4"><%= curso.numSecciones || '16' %> secciones ¬∑ <%= curso.numClases || '48' %> clases ¬∑ <%= curso.duracion || '12 h 30 m' %></p>
                    <ul class="space-y-3 mb-6">
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido1 || 'Fundamentos de Java y programaci√≥n orientada a objetos' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido2 || 'Colecciones, gen√©ricos, streams y manejo de excepciones' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido3 || 'Testing, principios SOLID y Clean Code' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido4 || 'Desarrollo de APIs REST con Spring Boot y seguridad' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido5 || 'Persistencia con JPA y despliegue en la nube' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido6 || 'Introducci√≥n a microservicios, concurrencia y CI/CD' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-green-500 mr-3 mt-1">‚úîÔ∏è</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.contenido7 || 'Proyecto final pr√°ctico' %></span>
                        </li>
                    </ul>
                    <button class="text-primary-600 hover:text-primary-700 font-medium transition-colors" onclick="toggleDetailedContent()">
                        Ver temario detallado
                    </button>
                    <div id="detailedContent" class="hidden mt-6">
                        <div class="bg-gray-50 dark:bg-gray-800 rounded-lg p-6">
                            <p class="text-gray-600 dark:text-gray-400">Contenido detallado del curso...</p>
                        </div>
                    </div>
                </section>

                <!-- Requirements Section -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">Requisitos</h2>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <span class="text-blue-500 mr-3 mt-1">‚Ä¢</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.requisito1 || 'Conocimientos b√°sicos de cualquier lenguaje de programaci√≥n.' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-500 mr-3 mt-1">‚Ä¢</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.requisito2 || 'JDK 11 o superior instalado.' %></span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-blue-500 mr-3 mt-1">‚Ä¢</span>
                            <span class="text-gray-700 dark:text-gray-300"><%= curso.requisito3 || 'IDE recomendado: IntelliJ IDEA, Eclipse o VS Code.' %></span>
                        </li>
                    </ul>
                </section>

                <!-- Description Section -->
                <section class="mb-12">
                    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">Descripci√≥n</h2>
                    <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                        <%= curso.descripcionLarga || 'Este curso te gu√≠a desde los conceptos m√°s b√°sicos de Java hasta el desarrollo de aplicaciones empresariales complejas. Aprender√°s las mejores pr√°cticas, patrones de dise√±o y herramientas modernas utilizadas en la industria.' %>
                    </p>
                </section>
            </div>

            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 sticky top-24">
                    <div class="p-6">
                        <!-- Course Image with Play Button -->
                        <div class="relative mb-6">
                            <img src="/images/<%= curso.imagen || 'java-develop.webp' %>" 
                                    class="w-full h-48 object-cover rounded-lg" 
                                    alt="<%= curso.titulo %>">
                            <button class="absolute top-3 right-3 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-900 dark:text-white p-2 rounded-full shadow-lg transition-colors">
                                <i class="bi bi-play-fill text-lg"></i>
                            </button>
                        </div>

                        <!-- Price -->
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-3xl font-bold text-primary-600">COP <%= (curso.precio || 200000).toLocaleString() %></span>
                            <span class="text-lg text-gray-500 line-through">COP <%= ((curso.precio || 200000) * 1.5).toLocaleString() %></span>
                        </div>

                        <!-- Action Buttons -->
                        <div class="space-y-3 mb-6">
                            <button class="w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-4 px-6 rounded-lg transition-colors" 
                                    onclick="addToCart('<%= curso._id %>', '<%= curso.titulo %>', <%= curso.precio || 200000 %>)">
                                A√±adir al carrito
                            </button>
                            <a href="/comprar/<%= curso._id %>" 
                                class="block w-full text-center border border-primary-600 text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 font-medium py-4 px-6 rounded-lg transition-colors">
                                Comprar ahora
                            </a>
                        </div>

                        <!-- Guarantee -->
                        <div class="text-center">
                            <small class="text-gray-500 dark:text-gray-400">Garant√≠a de devoluci√≥n de 30 d√≠as</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript for Course Page -->
<script>
function toggleDetailedContent() {
    const content = document.getElementById('detailedContent');
    content.classList.toggle('hidden');
}

function addToCart(cursoId, titulo, precio) {
    // Show toast notification
    const toast = document.getElementById('toast');
    if (toast) {
        toast.textContent = `"${titulo}" a√±adido al carrito`;
        toast.classList.remove('hidden');
        toast.classList.add('flex');
        
        // Auto-hide after 3 seconds
        setTimeout(() => {
            toast.classList.add('hidden');
            toast.classList.remove('flex');
        }, 3000);
    }
    
    // Open cart modal
    const cartModal = document.getElementById('cartModal');
    if (cartModal) {
        cartModal.classList.remove('hidden');
        cartModal.classList.add('flex');
    }
    
    console.log('Course added to cart:', { cursoId, titulo, precio });
}
</script> 