<div class="container" style="margin-top: 6rem;">
    <div class="row">
        <div class="col-lg-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb bg-white px-0">
                    <li class="breadcrumb-item"><a href="/cursos" class="text-decoration-none text-primary">Cursos</a></li>
                    <li class="breadcrumb-item"><a href="/cursos?categoria=<%= curso.categoria || 'todos' %>" class="text-decoration-none text-primary"><%= curso.categoria || 'General' %></a></li>
                    <li class="breadcrumb-item active" aria-current="page"><%= curso.titulo %></li>
                </ol>
            </nav>

            <div class="row">
                <div class="col-lg-8">
                    <h1 class="display-5 fw-bold mb-3 text-primary">
                        <%= curso.titulo || 'PROGRAMACIÓN DE CERO A SENIOR EN JAVA' %>
                        <span class="text-muted fs-5">. <%= curso.subtitulo || 'Domina Java y buenas prácticas' %></span>
                    </h1>
                    <p class="lead">
                        <%= curso.descripcion || 'Desde sintaxis básica hasta arquitecturas empresariales con Spring Boot, construye aplicaciones robustas siguiendo principios de Clean Code y SOLID.' %>
                    </p>
                    <div class="d-flex align-items-center mb-4">
                        <span class="badge bg-success me-3">Lo más vendido</span>
                        <span class="fw-bold text-primary me-2"><%= (curso.rating || 4.8).toFixed(1) %></span>
                        <span class="text-warning me-1">
                            <% for(let i = 0; i < 5; i++) { %>
                                <% if (i < Math.floor(curso.rating || 4.8)) { %>
                                    <i class="bi bi-star-fill"></i>
                                <% } else if (i === Math.floor(curso.rating || 4.8) && (curso.rating || 4.8) % 1 > 0) { %>
                                    <i class="bi bi-star-half"></i>
                                <% } else { %>
                                    <i class="bi bi-star"></i>
                                <% } %>
                            <% } %>
                        </span>
                        <span class="text-muted me-3">(<%= (curso.numValoraciones || 4512).toLocaleString() %> valoraciones)</span>
                        <span class="text-muted"><%= (curso.numEstudiantes || 12470).toLocaleString() %> estudiantes</span>
                    </div>

                    <div class="d-grid gap-2 d-md-flex mb-5">
                        <button class="btn btn-outline-primary me-2 position-relative" data-bs-toggle="modal"
                            data-bs-target="#cartModal" data-curso-id="<%= curso._id %>">
                            <i class="bi bi-cart"></i>
                            Añadir al carrito
                        </button>
                        <a href="/comprar/<%= curso._id %>" class="btn btn-outline-primary me-2 position-relative rounded-pill">Comprar ahora</a>
                    </div>

                    <section class="mb-5">
                        <h2 class="h4 mb-3 text-primary">¿Qué aprenderás?</h2>
                        <div class="row border-bottom pb-3">
                            <div class="col-sm-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">✔️ <%= curso.aprendizaje1 || 'Sintaxis y estructuras de control en Java' %></li>
                                    <li class="mb-2">✔️ <%= curso.aprendizaje2 || 'Programación orientada a objetos y patrones de diseño' %></li>
                                    <li class="mb-2">✔️ <%= curso.aprendizaje3 || 'Colecciones, genéricos y Streams en Java 8+' %></li>
                                </ul>
                            </div>
                            <div class="col-sm-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">✔️ <%= curso.aprendizaje4 || 'Tests unitarios con JUnit y Mockito' %></li>
                                    <li class="mb-2">✔️ <%= curso.aprendizaje5 || 'Desarrollo de APIs REST con Spring Boot' %></li>
                                    <li class="mb-2">✔️ <%= curso.aprendizaje6 || 'Principios SOLID y Clean Code aplicados a Java' %></li>
                                </ul>
                            </div>
                        </div>
                    </section>

                    <section class="mb-5">
                        <h2 class="h4 mb-3 text-primary">Incluye</h2>
                        <div class="row row-cols-1 row-cols-md-2 g-3 border-bottom pb-3">
                            <div class="col d-flex align-items-center">
                                <span class="me-2">🎥</span><%= curso.horasVideo || '12' %> horas de vídeo bajo demanda
                            </div>
                            <div class="col d-flex align-items-center">
                                <span class="me-2">📄</span><%= curso.numArticulos || '5' %> artículos detallados
                            </div>
                            <div class="col d-flex align-items-center">
                                <span class="me-2">📥</span><%= curso.numRecursos || '30' %> recursos descargables
                            </div>
                            <div class="col d-flex align-items-center">
                                <span class="me-2">📱</span>Acceso en móviles y TV
                            </div>
                            <div class="col d-flex align-items-center">
                                <span class="me-2">🏆</span>Certificado de finalización
                            </div>
                        </div>
                    </section>

                    <section class="mb-5">
                        <h2 class="h4 mb-3 text-primary">Contenido del curso</h2>
                        <p class="text-muted"><%= curso.numSecciones || '16' %> secciones · <%= curso.numClases || '48' %> clases · <%= curso.duracion || '12 h 30 m' %></p>
                        <ul class="list-unstyled">
                            <li>✔️ <%= curso.contenido1 || 'Fundamentos de Java y programación orientada a objetos' %></li>
                            <li>✔️ <%= curso.contenido2 || 'Colecciones, genéricos, streams y manejo de excepciones' %></li>
                            <li>✔️ <%= curso.contenido3 || 'Testing, principios SOLID y Clean Code' %></li>
                            <li>✔️ <%= curso.contenido4 || 'Desarrollo de APIs REST con Spring Boot y seguridad' %></li>
                            <li>✔️ <%= curso.contenido5 || 'Persistencia con JPA y despliegue en la nube' %></li>
                            <li>✔️ <%= curso.contenido6 || 'Introducción a microservicios, concurrencia y CI/CD' %></li>
                            <li>✔️ <%= curso.contenido7 || 'Proyecto final práctico' %></li>
                        </ul>
                        <a class="text-primary text-decoration-none" data-bs-toggle="collapse" href="#fullContent"
                            role="button" aria-expanded="false" aria-controls="fullContent">
                            Ver temario detallado
                        </a>
                        <div class="collapse mt-3" id="fullContent">
                            <div class="accordion" id="accordionSections">
                                <!-- Contenido detallado del curso -->
                            </div>
                        </div>
                    </section>

                    <section class="mb-5">
                        <h2 class="h4 mb-3 text-primary">Requisitos</h2>
                        <ul>
                            <li><%= curso.requisito1 || 'Conocimientos básicos de cualquier lenguaje de programación.' %></li>
                            <li><%= curso.requisito2 || 'JDK 11 o superior instalado.' %></li>
                            <li><%= curso.requisito3 || 'IDE recomendado: IntelliJ IDEA, Eclipse o VS Code.' %></li>
                        </ul>
                    </section>

                    <section class="mb-5">
                        <h2 class="h4 mb-3 text-primary">Descripción</h2>
                        <p>
                            <%= curso.descripcionLarga || 'Este curso te guía desde los conceptos más básicos de Java hasta el desarrollo de aplicaciones empresariales complejas. Aprenderás las mejores prácticas, patrones de diseño y herramientas modernas utilizadas en la industria.' %>
                        </p>
                    </section>
                </div>

                <div class="col-lg-4">
                    <div class="card shadow-sm border-0">
                        <div class="card-body p-4">
                            <div class="position-relative mb-3">
                                <img src="/images/<%= curso.imagen || 'java-develop.webp' %>" class="img-fluid rounded" alt="<%= curso.titulo %>">
                                <button class="btn btn-sm btn-light position-absolute top-0 end-0 m-2">
                                    <i class="bi bi-play-fill"></i>
                                </button>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="h3 fw-bold text-primary">COP <%= (curso.precio || 200000).toLocaleString() %></span>
                                <span class="text-decoration-line-through text-muted">COP <%= ((curso.precio || 200000) * 1.5).toLocaleString() %></span>
                            </div>
                            <div class="d-grid gap-2">
                                <button class="btn btn-primary btn-lg" data-bs-toggle="modal" data-bs-target="#cartModal" data-curso-id="<%= curso._id %>">
                                    Añadir al carrito
                                </button>
                                <a href="/comprar/<%= curso._id %>" class="btn btn-outline-primary btn-lg">
                                    Comprar ahora
                                </a>
                            </div>
                            <div class="text-center mt-3">
                                <small class="text-muted">Garantía de devolución de 30 días</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 