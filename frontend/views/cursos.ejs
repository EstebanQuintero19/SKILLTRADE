<!-- Courses Page Header -->
<div class="bg-gradient-to-r from-primary-600 via-primary-700 to-primary-800 dark:from-primary-800 dark:via-primary-900 dark:to-primary-950 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">
            Explora Nuestros Cursos
        </h1>
        <p class="text-xl text-primary-100 max-w-3xl mx-auto">
            Descubre una amplia variedad de cursos impartidos por expertos en diferentes disciplinas
        </p>
    </div>
</div>

<!-- Search and Filters Section -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 mb-8">
        <div class="grid md:grid-cols-2 gap-6">
            <!-- Search Bar -->
            <div class="relative">
                <form method="GET" action="/cursos" class="flex">
                    <div class="relative flex-1">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="bi bi-search text-gray-400"></i>
                        </div>
                        <input class="w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-l-lg text-sm placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
                               type="search" name="search" placeholder="Buscar cursos..." value="<%= search %>">
                    </div>
                    <button class="px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-r-lg transition-colors" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                </form>
            </div>

            <!-- Category Filter -->
            <div class="relative">
                <select class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent" 
                        onchange="window.location.href='/cursos?categoria=' + this.value + '&search=<%= search %>'">
                    <option value="todos" <%= categoria === 'todos' ? 'selected' : '' %>>Todas las categorías</option>
                    <option value="tecnologia" <%= categoria === 'tecnologia' ? 'selected' : '' %>>Tecnología</option>
                    <option value="arte" <%= categoria === 'arte' ? 'selected' : '' %>>Arte</option>
                    <option value="musica" <%= categoria === 'musica' ? 'selected' : '' %>>Música</option>
                    <option value="cocina" <%= categoria === 'cocina' ? 'selected' : '' %>>Cocina</option>
                    <option value="programacion" <%= categoria === 'programacion' ? 'selected' : '' %>>Programación</option>
                </select>
            </div>
        </div>
    </div>

    <!-- Results Count -->
    <div class="mb-6">
        <p class="text-gray-600 dark:text-gray-400">
            <% if (cursos && cursos.length > 0) { %>
                Mostrando <span class="font-semibold text-primary-600"><%= cursos.length %></span> cursos
                <% if (categoria !== 'todos') { %>
                    en la categoría <span class="font-semibold text-primary-600"><%= categoria %></span>
                <% } %>
                <% if (search) { %>
                    para "<span class="font-semibold text-primary-600"><%= search %></span>"
                <% } %>
            <% } else { %>
                No se encontraron cursos
            <% } %>
        </p>
    </div>

    <!-- Courses Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        <% if (cursos && cursos.length > 0) { %>
            <% cursos.forEach(curso => { %>
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden border border-gray-200 dark:border-gray-700">
                    <div class="relative">
                        <img src="/images/<%= curso.imagen || 'default-course.jpg' %>" 
                             alt="<%= curso.titulo %>" 
                             class="w-full h-48 object-cover">
                        <div class="absolute top-4 right-4">
                            <span class="px-3 py-1 bg-primary-600 text-white text-xs font-semibold rounded-full">
                                <%= curso.categoria || 'General' %>
                            </span>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="flex items-center mb-3">
                            <div class="flex text-accent-500">
                                <% for(let i = 0; i < 5; i++) { %>
                                    <% if (i < Math.floor(curso.rating || 0)) { %>
                                        <i class="bi bi-star-fill"></i>
                                    <% } else if (i === Math.floor(curso.rating || 0) && (curso.rating || 0) % 1 > 0) { %>
                                        <i class="bi bi-star-half"></i>
                                    <% } else { %>
                                        <i class="bi bi-star"></i>
                                    <% } %>
                                <% } %>
                            </div>
                            <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">(<%= (curso.rating || 0).toFixed(1) %>)</span>
                        </div>
                        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3 line-clamp-2">
                            <a href="/curso/<%= curso._id %>" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                                <%= curso.titulo %>
                            </a>
                        </h3>
                        <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 text-sm">
                            <%= curso.descripcion %>
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl font-bold text-primary-600 dark:text-primary-400">
                                COP <%= curso.precio ? curso.precio.toLocaleString() : '0' %>
                            </span>
                            <button class="p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full transition-colors" 
                                    onclick="addToCart('<%= curso._id %>', '<%= curso.titulo %>', <%= curso.precio || 0 %>)">
                                <i class="bi bi-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            <% }); %>
        <% } else { %>
            <!-- No courses found message -->
            <div class="col-span-full text-center py-16">
                <div class="max-w-md mx-auto">
                    <i class="bi bi-search text-6xl text-gray-300 dark:text-gray-600 mb-4"></i>
                    <h3 class="text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2">
                        No se encontraron cursos
                    </h3>
                    <p class="text-gray-500 dark:text-gray-500 mb-6">
                        Intenta con otros filtros o términos de búsqueda
                    </p>
                    <a href="/cursos" class="inline-flex items-center px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors">
                        <i class="bi bi-arrow-clockwise mr-2"></i>
                        Ver todos los cursos
                    </a>
                </div>
            </div>
        <% } %>
    </div>

    <!-- Example Courses (if no backend data) -->
    <% if (!cursos || cursos.length === 0) { %>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-8">
            <!-- Example Course 1 -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden border border-gray-200 dark:border-gray-700">
                <div class="relative">
                    <img src="/images/cocina.jpeg" alt="Cocina" class="w-full h-48 object-cover">
                    <div class="absolute top-4 right-4">
                        <span class="px-3 py-1 bg-green-500 text-white text-xs font-semibold rounded-full">
                            Cocina
                        </span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <div class="flex text-accent-500">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-half"></i>
                        </div>
                        <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">(4.5)</span>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3 line-clamp-2">
                        <a href="/curso/ejemplo1" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                            COCINA PARA LOS QUE NO COCINAN
                        </a>
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 text-sm">
                        Aprende lo esencial en la cocina, viaja por las diferentes gastronomías latinas.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-xl font-bold text-primary-600 dark:text-primary-400">
                            COP 220.000
                        </span>
                        <button class="p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full transition-colors" 
                                onclick="addToCart('ejemplo1', 'COCINA PARA LOS QUE NO COCINAN', 220000)">
                            <i class="bi bi-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Example Course 2 -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden border border-gray-200 dark:border-gray-700">
                <div class="relative">
                    <img src="/images/desarrollo-web.jpeg" alt="Desarrollo Web" class="w-full h-48 object-cover">
                    <div class="absolute top-4 right-4">
                        <span class="px-3 py-1 bg-blue-500 text-white text-xs font-semibold rounded-full">
                            Programación
                        </span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <div class="flex text-accent-500">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                        </div>
                        <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">(5.0)</span>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3 line-clamp-2">
                        <a href="/curso/ejemplo2" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                            DESARROLLO WEB COMPLETO
                        </a>
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 text-sm">
                        Aprende HTML, CSS, JavaScript y frameworks modernos para crear sitios web profesionales.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-xl font-bold text-primary-600 dark:text-primary-400">
                            COP 350.000
                        </span>
                        <button class="p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full transition-colors" 
                                onclick="addToCart('ejemplo2', 'DESARROLLO WEB COMPLETO', 350000)">
                            <i class="bi bi-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Example Course 3 -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden border border-gray-200 dark:border-gray-700">
                <div class="relative">
                    <img src="/images/digital-marketing.jpeg" alt="Marketing Digital" class="w-full h-48 object-cover">
                    <div class="absolute top-4 right-4">
                        <span class="px-3 py-1 bg-purple-500 text-white text-xs font-semibold rounded-full">
                            Marketing
                        </span>
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-center mb-3">
                        <div class="flex text-accent-500">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star"></i>
                        </div>
                        <span class="ml-2 text-sm text-gray-500 dark:text-gray-400">(4.0)</span>
                    </div>
                    <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-3 line-clamp-2">
                        <a href="/curso/ejemplo3" class="hover:text-primary-600 dark:hover:text-primary-400 transition-colors">
                            MARKETING DIGITAL
                        </a>
                    </h3>
                    <p class="text-gray-600 dark:text-gray-300 mb-4 line-clamp-3 text-sm">
                        Domina las estrategias de marketing digital para hacer crecer tu negocio online.
                    </p>
                    <div class="flex items-center justify-between">
                        <span class="text-xl font-bold text-primary-600 dark:text-primary-400">
                            COP 280.000
                        </span>
                        <button class="p-3 bg-primary-600 hover:bg-primary-700 text-white rounded-full transition-colors" 
                                onclick="addToCart('ejemplo3', 'MARKETING DIGITAL', 280000)">
                            <i class="bi bi-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    <% } %>
</div>

<!-- Add to Cart JavaScript -->
<script>
function addToCart(cursoId, titulo, precio) {
    // Show toast notification
    if (typeof showToast === 'function') {
        showToast(`¡${titulo} agregado al carrito!`);
    }
    
    // Open cart modal
    if (typeof openCartModal === 'function') {
        openCartModal();
    }
    
    // Here you would typically add the course to the cart
    console.log('Course added to cart:', { cursoId, titulo, precio });
}
</script> 